@using IDIMWorkBranchProject.Extentions.Utilities
@using IDIMWorkBranchProject.Models
@using System.Web

@{
    // Peek to check existence and Get to consume the message
    var response = TempData.Peek<Response>("ResponseMsg");
    var getResponse = TempData.Get<Response>("ResponseMsg");
}

@if (response != null && getResponse != null)
{
    <script type="text/javascript">
        $(document).ready(function () {
            var toastrType = '@getResponse.Type.ToString().ToLower()'; // e.g. "success", "error", etc.

            var toastrOptions = {
                positionClass: 'toast-top-right',
                timeOut: 5000,
                closeButton: true,
                progressBar: true,
                onShown: function () {
                    $('#toast-container > .toast').css('opacity', 1);
                    $('#toast-container > .toast').css('box-shadow', 'none');
                }
            };

            toastr.options = toastrOptions;

            // Encode message safely for JavaScript
            toastr[toastrType]('@Html.Raw(HttpUtility.JavaScriptStringEncode(getResponse.Message))');
        });
    </script>
}
