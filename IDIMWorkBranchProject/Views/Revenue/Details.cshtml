@using IDIMWorkBranchProject.Extentions
@using IDIMWorkBranchProject.Models.Wbpm
@model RevenueDetailsVm

@{
    ViewBag.Title = "Details";
}

<div class="page-title">
    <div class="pull-left">
        <h3 class="title">রাজস্ব বিস্তারিত</h3>
    </div>
    <div class="pull-right hidden-xs">
        <ol class="breadcrumb">
            <li>
                <a href="@Url.Action("Index", "Dashboard")"><i class="fa fa-home"></i> ড্যাশবোর্ড</a>
            </li>
            <li class="active">
                <strong>রাজস্বের বিস্তারিত</strong>
            </li>
        </ol>
    </div>
</div>

<section class="box">
    <header class="panel_header">
        <h2 class="title pull-left">রাজস্বের বিস্তারিত তালিকা</h2>
        <div class="actions panel_actions pull-right">
            <a href="@Url.Action("Create", "Revenue", new { id = Model.RevenueDetail.RevenueId })" class="btn btn-primary">
                <i class="fa fa-pencil-square-o"></i> সংশোধন
            </a>
            <a class="box_toggle fa fa-chevron-down"></a>
        </div>
    </header>

    <div class="content-body">
        <div class="panel panel-info">
            <div class="panel-body">
                <div class="row">
                    <div class="form-display col-md-12">
                        @Html.LabelFor(m => m.RevenueDetail.WorkTitleB, new { @class = "display-label" })
                        @Html.DisplayFor(m => m.RevenueDetail.WorkTitleB)
                    </div>
                    <div class="form-display col-md-6">
                        @Html.LabelFor(m => m.RevenueDetail.EstimateCost, new { @class = "display-label" })
                        @Html.DisplayFor(m => m.RevenueDetail.EstimateCost) (@Html.DisplayFor(m => m.RevenueDetail.EstimateCostInWord))
                    </div>
                    <div class="form-display col-md-6">
                        @Html.LabelFor(m => m.RevenueDetail.Remarks, new { @class = "display-label" })
                        @Html.DisplayFor(m => m.RevenueDetail.Remarks)
                    </div>
                </div>

            </div>
        </div>

        <div class="panel panel-info">
            <div class="panel-heading" style="padding:10px;">
                এনওএইচএ তথ্য
                <a href="@Url.Action("Create", "RevenueNoha", new { id = Model.RevenueDetail.RevenueId })" class="btn btn-primary btn-xs pull-right">
                    <i class="fa fa-pencil-square"></i> এনওএইচএ সংযুক্ত করুণ
                </a>
            </div>

            <div class="panel-body" style="padding:0px !important">
                @if (Model.NohaDetail != null)
                {
                    <table class="table table-striped table-bordered" width="100%" cellspacing="0" style="margin:0px!important">
                        <tr>
                            <th>@Html.LabelFor(m => m.NohaDetail.RevenueNohaDate)</th>
                            <td>@Html.DisplayFor(m => m.NohaDetail.RevenueNohaDate)</td>
                        </tr>
                        <tr>
                            <th>@Html.LabelFor(m => m.NohaDetail.LetterNo)</th>
                            <td>@Html.DisplayFor(m => m.NohaDetail.LetterNo)</td>
                        </tr>
                        <tr>
                            <th>@Html.LabelFor(m => m.NohaDetail.RevenueNohaScanDocument)</th>
                            <td>
                                @if (!string.IsNullOrEmpty(Model.NohaDetail.RevenueNohaScanDocument))
                                {
                                    <a href="@Url.Action("PreviewDocument", "RevenueNoha", new { fileName = Model.NohaDetail.RevenueNohaScanDocument })" target="_blank">
                                        Preview Document
                                    </a>
                                }
                                else
                                {
                                    <span>No file uploaded</span>
                                }
                            </td>
                        </tr>
                    </table>
                }
                else
                {
                    <div class="alert alert-warning" style="margin-bottom: 0;">
                        <strong>এনওএইচএ তথ্য পাওয়া যায়নি।</strong>
                    </div>
                }
            </div>
        </div>

        <div class="panel panel-info">
            <div class="panel-heading" style="padding:10px;">
                ব্যাংক গ্যারান্টি/পারফরমেন্স সিকিউরিটি
                <a href="@Url.Action("Create", "RevenuePerformanceSecurity", new { id = Model.RevenueDetail.RevenueId })"
                   class="btn btn-primary btn-xs pull-right mt-2 mb-2 @(Model.RevenueDetail.IsNoahCompleted ? "" : "disabled")"
                   @(Model.RevenueDetail.IsNoahCompleted ? "" : "onclick='return false;'")>
                    <i class="fa fa-pencil-square"></i> ব্যাংক গ্যারান্টি সংযুক্ত করুণ
                </a>
            </div>

            <div class="panel-body" style="padding:0px !important">
                @if (Model.PerformanceSecurityDetail != null)
                {
                    <table class="table table-striped table-bordered" width="100%" cellspacing="0" style="margin:0px!important">
                        <tr>
                            <th>@Html.LabelFor(m => m.PerformanceSecurityDetail.RevenuePerformanceSecuritySubmissionDate)</th>
                            <td>@Html.DisplayFor(m => m.PerformanceSecurityDetail.RevenuePerformanceSecuritySubmissionDate)</td>
                        </tr>
                        <tr>
                            <th>@Html.LabelFor(m => m.PerformanceSecurityDetail.RevenuePerformanceSecurityExpiryDate)</th>
                            <td>@Html.DisplayFor(m => m.PerformanceSecurityDetail.RevenuePerformanceSecurityExpiryDate)</td>
                        </tr>
                        <tr>
                            <th>@Html.LabelFor(m => m.PerformanceSecurityDetail.RevenuePerformanceSecurityScanDocument)</th>
                            <td>
                                @if (!string.IsNullOrEmpty(Model.PerformanceSecurityDetail.RevenuePerformanceSecurityScanDocument))
                                {
                                    <a href="@Url.Action("PreviewDocument", "RevenuePerformanceSecurity", new { fileName = Model.PerformanceSecurityDetail.RevenuePerformanceSecurityScanDocument })" target="_blank">
                                        Preview Document
                                    </a>
                                }
                                else
                                {
                                    <span>No file uploaded</span>
                                }
                            </td>
                        </tr>
                    </table>
                }
                else
                {
                    <div class="alert alert-warning" style="margin-bottom: 0;">
                        <strong>পারফরমেন্স সিকিউরিটির তথ্য পাওয়া যায়নি।</strong>
                    </div>
                }
            </div>
        </div>

        <!-- রাজস্ব চুক্তি Section -->
        <div class="panel panel-info">
            <div class="panel-heading" style="padding:10px;">
                রাজস্ব চুক্তি
                <a href="@Url.Action("Create", "RevenueContractAgreement", new { id = Model.RevenueDetail.RevenueId })"
                   class="btn btn-primary btn-xs pull-right @(Model.RevenueDetail.IsPerformanceSecuritySubmited ? "" : "disabled")"
                   @(Model.RevenueDetail.IsPerformanceSecuritySubmited ? "" : "onclick='return false;'")>
                    <i class="fa fa-pencil-square"></i> রাজস্ব চুক্তি সংযুক্ত করুণ
                </a>
                <a href="@Url.Action("PrintRevenueContractAgreement", "Report", new { id = Model.RevenueDetail.RevenueId, type="pdf"})" class="btn btn-success btn-xs pull-right mt-2 mb-2 @(Model.RevenueDetail.IsAgreementCompleted ? "" : "disabled")"
                   @(Model.RevenueDetail.IsAgreementCompleted ? "" : "onclick='return false;'")>
                    <i class="fa fa-file-pdf-o"></i> প্রিন্ট PDF
                </a>
                <a href="@Url.Action("PrintRevenueContractAgreement", "Report", new { id = Model.RevenueDetail.RevenueId, type="word" })" class="btn btn-success btn-xs pull-right mt-2 mb-2 @(Model.RevenueDetail.IsAgreementCompleted ? "" : "disabled")"
                   @(Model.RevenueDetail.IsAgreementCompleted ? "" : "onclick='return false;'")>
                    <i class="fa fa-file-word-o"></i> প্রিন্ট Word
                </a>
            </div>

            <div class="panel-body" style="padding:0px !important">
                @if (Model.RevenueContractAgreementDetail != null)
                {
                    <table class="table table-striped table-bordered" width="100%" cellspacing="0" style="margin:0px!important">
                        <tr>
                            <th>@Html.LabelFor(m => m.RevenueContractAgreementDetail.AgreementDate)</th>
                            <td>@Html.DisplayFor(m => m.RevenueContractAgreementDetail.AgreementDate)</td>
                        </tr>
                        <tr>
                            <th>@Html.LabelFor(m => m.RevenueContractAgreementDetail.ScanDocument)</th>
                            <td>
                                @if (!string.IsNullOrEmpty(Model.RevenueContractAgreementDetail.ScanDocument))
                                {
                                    <a href="@Url.Action("PreviewDocument", "RevenueContractAgreement", new { fileName = Model.RevenueContractAgreementDetail.ScanDocument })" target="_blank">
                                        Preview Document
                                    </a>
                                }
                                else
                                {
                                    <span>No file uploaded</span>
                                }
                            </td>
                        </tr>
                    </table>
                }
                else
                {
                    <div class="alert alert-warning"><strong>রাজস্ব চুক্তির তথ্য পাওয়া যায়নি।</strong></div>
                }
            </div>
        </div>

        <!-- কার্যাদেশ Section -->
        <div class="panel panel-info">
            <div class="panel-heading" style="padding:10px;">
                কার্যাদেশ
                <a href="@Url.Action("Create", "RevenueWorkOrder", new { id = Model.RevenueDetail.RevenueId })"
                   class="btn btn-primary btn-xs pull-right @(Model.RevenueDetail.IsAgreementCompleted ? "" : "disabled")"
                   @(Model.RevenueDetail.IsAgreementCompleted ? "" : "onclick='return false;'")>
                    <i class="fa fa-print"></i> কার্যাদেশ সংযুক্ত করুণ
                </a>
                <a href="@Url.Action("PrintRevenueWorkOrder", "Report", new { id = Model.RevenueDetail.RevenueId, type="pdf"})" class="btn btn-success btn-xs pull-right mt-2 mb-2 @(Model.RevenueDetail.IsWorkOrderComplited ? "" : "disabled")"
                   @(Model.RevenueDetail.IsWorkOrderComplited ? "" : "onclick='return false;'")>
                    <i class="fa fa-file-pdf-o"></i> প্রিন্ট PDF
                </a>
                <a href="@Url.Action("PrintRevenueWorkOrder", "Report", new { id = Model.RevenueDetail.RevenueId, type="word" })" class="btn btn-success btn-xs pull-right mt-2 mb-2 @(Model.RevenueDetail.IsWorkOrderComplited ? "" : "disabled")"
                   @(Model.RevenueDetail.IsWorkOrderComplited ? "" : "onclick='return false;'")>
                    <i class="fa fa-file-word-o"></i> প্রিন্ট Word
                </a>
            </div>

            <div class="panel-body" style="padding:0px !important">
                @if (Model.WorkOrderList != null && Model.WorkOrderList.Any())
                {
                    <table class="table table-striped table-bordered" width="100%" cellspacing="0" style="margin:0px!important">
                        <thead>
                            <tr>
                                <th>লেটার নং</th>
                                <th>কার্যাদেশের তারিখ</th>
                                <th>শুরুর তারিখ</th>
                                <th>শেষের তারিখ</th>
                                <th>কার্যাদেশ ডকুমেন্ট</th>
                                <th style="width:140px;">কার্যক্রম</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.WorkOrderList)
                            {
                                <tr>
                                    <td>@item.RevenueWorkOrderLetterNo</td>
                                    <td>@item.RevenueWorkOrderDate.ToNullableShortDateString()</td>
                                    <td>@item.RevenueWorkOrderStartDate.ToNullableShortDateString()</td>
                                    <td>@item.RevenueWorkOrderEndDate.ToNullableShortDateString()</td>
                                    <td>
                                        @if (!string.IsNullOrEmpty(item.RevenueWorkOrderScanDocument))
                                        {
                                            <a href="@Url.Action("PreviewDocument", "RevenueWorkOrder", new { fileName = item.RevenueWorkOrderScanDocument })" target="_blank">
                                                Preview
                                            </a>
                                        }
                                        else
                                        {
                                            <span>No file</span>
                                        }
                                    </td>
                                    <td>
                                        <a href="@Url.Action("Edit", "RevenueWorkOrder", new { id = item.RevenueWorkOrderId })" class="btn btn-primary btn-xs">
                                            <i class="fa fa-pencil-square-o"></i> সংশোধন
                                        </a>
                                        <a href="@Url.Action("Delete", "RevenueWorkOrder", new { id = item.RevenueWorkOrderId })" class="btn btn-danger btn-xs">
                                            <i class="fa fa-trash-o"></i> অপসারণ
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
                else
                {
                    <div class="alert alert-warning"><strong>কার্যাদেশের কোনো তথ্য পাওয়া যায়নি।</strong></div>
                }
            </div>
        </div>
    </div>
</section>
